---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  tags: string[];
}

const { title, description, pubDate, tags } = Astro.props as Props;
const base = import.meta.env.BASE_URL;
const basePath = base.endsWith('/') ? base : `${base}/`;
const normalizeTag = (tag: string) => tag.toLowerCase().replace(/\s+/g, '-');
---

<BaseLayout title={`${title} â€” spandan`} description={description}>
  <div class="container">
    <article class="post-layout">
      <header class="post-header">
        <time class="post-date">{pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</time>
        <h1>{title}</h1>
        <p class="post-excerpt">{description}</p>
        {tags.length > 0 && (
          <div class="post-tags">
            {tags.map((tag: string) => (
              <a class="tag" href={`${basePath}tags/${normalizeTag(tag)}/`}>{tag}</a>
            ))}
          </div>
        )}
      </header>
      <section class="prose">
        <slot />
      </section>
    </article>
  </div>
</BaseLayout>
